!function(c,g,m){XF.BRMSContainer=XF.Element.newHandler({options:{},$clone:null,created:!1,init:function(){this.$container=$container=this.$target;var a=$container.attr("data-previewType"),b=parseInt($container.attr("data-allowCusItemLimit")),e=parseInt($container.attr("data-allowCusLayout")),h=$container.attr("data-useLimit"),l=$container.attr("data-entryLimit"),k=$container.attr("data-navPosition"),d=parseInt($container.attr("data-updateInterval")),f=parseInt($container.attr("data-modernStatisticId"));
this.$containerClass="BRMSContainer ";$container.hasClass("BRMSContainerDark")&&(this.$containerClass="BRMSContainer BRMSContainerDark ");this.$previewType=a;this.$allowCusItemLimit=b;this.$allowCusLayout=e;this.$entryLimit=l;this.$navPosition=k;this.$updateIntervalTime=d;this.$modernStatisticId=f;this.$hardReload=!1;a=XF.Cookie.get("brmsLayoutChange"+f);e&&a&&($container.removeClass("brmsTopTabs brmsRightTabs brmsLeftTabs"),$container.addClass(a));h&&0<parseInt(h)?(this.$entryLimit=h,$container.attr("data-entryLimit",
h)):this.$allowCusItemLimit&&XF.Cookie.get("brmsNumberEntry"+f)&&(this.$entryLimit=XF.Cookie.get("brmsNumberEntry"+f),$container.attr("data-entryLimit",this.$entryLimit));e=$container.find("ul.brmsTabNav > li").length-2;$container.find("ul.brmsTabNav > li:first").addClass("first");$container.find("ul.brmsTabNav > li:eq("+e+")").addClass("last");$container.find("ul.brmsTabNav > li > a, .brmsTabNavHidden  ul.brmsDropdownMenu  > li > a").click(XF.proxy(this,"navTabTriggerHandle"));this.showTab($container.find(".brmsTabContent:first").data("content"));
this.updateInterval();$container.find(".brmsNumberEntry").click(XF.proxy(this,"numberEntryChangeHandle"));$container.find(".brmsLayoutChange").click(XF.proxy(this,"layoutChangeHandle"));$container.find(".brmsRefresh").click(XF.proxy(this,"refreshHandle"));this.responsiveInit();c(g).resize(XF.proxy(this,"responsiveInit"));$container.find(".brmsDropdownToggle").hover(function(a){a=c(this).find("ul.brmsDropdownMenu");a.show();a.offset().left+a.width()>$container.width()?a.addClass("edge"):a.removeClass("edge");
"none"!=a.css("display")&&0>=a.offset().left&&a.css({left:0})},function(a){a=c(this).find("ul.brmsDropdownMenu");c(this).find("ul.brmsDropdownMenu").hide();a.offset().left+a.width()>$container.width()?a.addClass("edge"):a.removeClass("edge");"none"!=a.css("display")&&0>=a.offset().left&&a.css({left:0})});$container.find(".brmsDropdownToggle").click(function(a){c(this).find("ul.brmsDropdownMenu").toggle()})},navTabTriggerHandle:function(a){a.preventDefault();var b=this.$container;a=c(a.target);a.attr("data-content")||
(a=a.closest("a"));var e=a.closest("li");e&&!e.hasClass("current")&&(b.find("ul.brmsTabNav > li , .brmsTabNavHidden  ul.brmsDropdownMenu  > li").removeClass("current"),a.closest("li").addClass("current"),e=a.attr("data-content"),b.find("."+e).find(".brmsIcoLoader").length&&this.getStatistics(a.attr("data-tabid"),0),b.find(".brmsTabContent").hide().removeClass("current"),b.find("."+e).fadeIn(100).addClass("current"),this.responsiveInit())},numberEntryChangeHandle:function(a){a.preventDefault();var b=
this.$container;if(a=c(a.target).attr("data-limit"))this.$entryLimit=a,b.attr("data-entryLimit",a),XF.Cookie.set("brmsNumberEntry"+this.$modernStatisticId,a),this.resetInterval(),this.$hardReload=1,this.runInterval(),this.$hardReload=!1},layoutChangeHandle:function(a){a.preventDefault();var b=this.$container;if(a=c(a.target).attr("data-layout"))b.hasClass(a)||(b.removeClass("brmsTopTabs brmsRightTabs brmsLeftTabs"),b.addClass(a)),XF.Cookie.set("brmsLayoutChange"+this.$modernStatisticId,a),this.responsiveInit()},
refreshHandle:function(a){a.preventDefault();a=c(a.target);a.hasClass("disable")||(this.resetInterval(),this.$hardReload=1,a.addClass("disable"),this.runInterval(),this.$hardReload=!1)},getStatistics:function(a,b){var e=this.$modernStatisticId,c=this;b||(b=c.$entryLimit);XF.ajax("post",XF.canonicalizeUrl("index.php?brms-statistics/load-tab"),{tab_id:a,modern_statistic_id:e,hard_reload:c.$hardReload,limit:b},XF.proxy(c,"showResult"),{cache:!1}).always(function(){c.$entryLimit=0})},showResult:function(a){var b=
this.$container,c=this;a.errors||a.exception||(c=this,XF.setupHtmlInsert(a.tabContentHtml,function(e,l,k){e?c.$container.find(".brmsTabContent_"+a.tabId).html(e):c.$container.find(".brmsTabContent_"+a.tabId).html("");k();XF.activate(b);c.$container.find(".brmsRefresh").removeClass("disable");c.responsiveInit()}),a.limit&&b.attr("data-entryLimit",a.limit))},showTab:function(a){var b=this.$container;a?(b.find("ul.brmsTabNav > li > a[data-content='"+a+"']").trigger("click"),a.replace("brmsTabContent_",
"")):(b.find("ul.brmsTabNav > li.current a").trigger("click"),b.find("ul.brmsTabNav > li.current a").attr("data-content").replace("brmsTabContent_",""))},runInterval:function(){this.getStatistics(this.$container.find("li.brmlShow.current a").data("tabid"),this.$entryLimit)},updateInterval:function(){if(!this.$brmsActive){var a=this.$container,b=this.$updateIntervalTime,c=this;if(0<b)return this.$brmsActive=g.setInterval(function(){c.getStatistics(a.find("ul.brmsTabNav > li.current a").data("tabid"),
c.$entryLimit)},1E3*b)}},clearInterval:function(){g.clearInterval(this.$brmsActive);this.$brmsActive=!1;this.$updateIntervalTime=0},resetInterval:function(){this.clearInterval();this.updateInterval()},responsiveInit:function(){var a=this.$container;if(a.find(".brmsTabContent.current").length){var b=a.find(".brmsLayoutList");if(a.hasClass("brmsTopTabs")){var e=0,h=a.find(".brmsStatisticHeader").width()-a.find(".brmsConfigList").width()-75,l=!1;a.find(".brmsTabNav > li.brmlShow").each(function(){var b=
a.find(".brmsTabNavHidden li:eq("+c(this).index()+")");e+c(this).width()<=h?(e+=c(this).width(),c(this).css({display:"block"}),b.hasClass("current")&&(c(this).addClass("current"),b.removeClass("current")),b.css({display:"none"})):(l=!0,c(this).css({display:"none"}),c(this).hasClass("current")&&(c(this).removeClass("current"),b.addClass("current")),b.css({display:"block"}))});var k=a.find(".brmsTabNavHiddenMenu");l?k.show():k.hide();480<a.width()?(XF.Cookie.get("brmsLayoutChange"+this.$modernStatisticId)&&
!a.hasClass(XF.Cookie.get("brmsLayoutChange"+this.$modernStatisticId))&&a.attr("class",this.$containerClass+XF.Cookie.get("brmsLayoutChange"+this.$modernStatisticId)),b.css({display:"inline-block"})):b.css({display:"none"})}else 480>=a.width()&&(a.attr("class",this.$containerClass+" brmsTopTabs"),b.css({display:"none"}));var d=a.find(".brmsTabContent.current ol li.itemStast");if(550>a.find(".brmsTabContent.current").width())d.hasClass("itemUser")||d.hasClass("itemProfilePost")?(d.find(".itemDetail.itemSubDetail").hide(),
d.find(".itemTitle").css({"max-width":"75%"}),350>a.find(".brmsTabContent.current").width()?(d.find(".itemDetail.itemDetailMain span").hide(),d.find(".itemDetail.itemDetailMain").css({width:"50px"}),d.find(".itemDetail.itemDetailMain.itemDate").css({width:"90px"}),d.find(".itemTitle").css({"max-width":"85%"})):(d.find(".itemDetail.itemDetailMain span, .itemDetail.itemDetailMain strong").show(),d.find(".itemDetail.itemDetailMain").css({width:"200px"}),d.find(".itemTitle").css({"max-width":"75%"}))):
(d.find(".itemDetail").hide(),d.find(".itemTitle").css({"max-width":"90%"}),350>a.find(".brmsTabContent.current").width()?d.find(".prefix").hide():d.find(".prefix").show());else{d.find(".prefix").show();d.find(".itemDetail").show();d.find(".itemTitle").css({width:"auto"});d.find(".itemDetail.itemDetailMain span").show();d.find(".itemDetail.itemDetailMain").css({width:"150px"});d.find(".itemDetail.itemDetailMain.itemDate").css({width:"200px"});var f=parseInt(.33*d.width()),g=d.find(".itemTitle").width();
d.find(".itemSubDetail").each(function(a){"none"==c(this).css("display")?g-150>f&&d.find(".itemSubDetail:eq("+a+")").show():g<f&&d.find(".itemSubDetail:eq("+a+")").hide()})}}},getText:function(a,b){return BRMSLANG.xf[a]||b}});XF.BRMSTooltip=XF.Element.newHandler({options:{},$parent:null,init:function(){this.$parent=this.$target.closest(".BRMSToolTip");this.$parent.hover(XF.proxy(this,"showTooltip"),XF.proxy(this,"hideTooltip"))},showTooltip:function(){var a=this.$parent.find(".tooltip");a.length||
(a=c(this.toolTips()),a.insertBefore(this.$target));a.addClass("show")},hideTooltip:function(){var a=this.$parent.find(".tooltip");a.length&&a.removeClass("show")},toolTips:function(){var a,b=this.$target;"resource"==b.attr("data-kind")&&b.attr("data-box")?a="<div>["+this.getText("brms_category")+"] : <b>"+b.attr("data-box")+'</b></div><ul class="listInline listInline--bullet"><li>'+this.getText("brms_download")+": <b>"+b.attr("data-download")+"</b> </li><li>"+this.getText("brms_update")+": <b>"+
b.attr("data-update")+"</b> </li><li>"+this.getText("brms_review")+": <b>"+b.attr("data-review")+"</b> </li><li>"+this.getText("brms_rating")+": <b>"+b.attr("data-vote")+"</b> </li></ul></div>":b.attr("data-box")&&(a="<div>["+this.getText("brms_forum")+"] : <b>"+b.attr("data-box")+'</b></div><ul class="listInline listInline--bullet"><li>'+this.getText("brms_views")+": <b>"+b.attr("data-view")+"</b> </li><li>"+this.getText("brms_replies")+": <b>"+b.attr("data-rep")+"</b> </li><li>"+this.getText("brms_likes")+
": <b>"+b.attr("data-like")+"</b> </li></ul></div>");if(a)return'<div class="tooltip tooltip--basic tooltip--top" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-content">'+a+"</div></div>"},getText:function(a,b){return XF.phrases[a]||b}});XF.Element.register("brms-container","XF.BRMSContainer");XF.Element.register("brms-tooltip","XF.BRMSTooltip")}(jQuery,window,document);