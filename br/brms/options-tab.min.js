!function(b,f,g){XF.BRMSFieldAdder=XF.Element.newHandler({options:{incrementFormat:null,remaining:-1},$clone:null,created:!1,init:function(){this.$clone=this.$target.clone();this.$clone.find("input:not(:checkbox), select, textarea").val("").prop("disabled",!1);var a=this;this.$target.on("keypress change",function(c){b(c.target).prop("readonly")||(a.$target.off(c),a.create())})},create:function(){if(!this.created&&(this.created=!0,0!=this.options.remaining)){var a=this.options.incrementFormat;if(this.options.incrementFormat){var c=
new RegExp("^"+XF.regexQuote(a).replace("\\{counter\\}","(\\d+)"));this.$clone.find("input, select, textarea").each(function(){var d=b(this),e=d.attr("name");e=e.replace(c,function(c,b){return a.replace("{counter}",parseInt(b,10)+1)});d.attr("name",e)})}0<this.options.remaining&&this.$clone.attr("data-remaining",this.options.remaining-1);this.$clone.insertAfter(this.$target);XF.activate(this.$clone);XF.layoutChange()}}});XF.BRMSTab=XF.Element.newHandler({options:{},$tabKind:null,$tabHeader:null,init:function(){this.$target.find(".tabKind").change(XF.proxy(this,
"rebuilHeader"));this.$target.find(".tabType").change(XF.proxy(this,"rebuilHeader"));this.$target.find(".collapse-button, .tabHeader").click(XF.proxy(this,"collapseTab"));this.$target.on("collapse-tab",XF.proxy(this,"collapseTab"));this.$tabHeader=this.$target.find(".block-formSectionHeader .tabHeader");this.$tabKind=this.$target.find("select.tabKind");this.$target.find(".hiddenSelector").change(function(){var a=b(this).closest(".hideParent");b(this).val()?(a.find(" > .hiddenContainer").addClass("active").hide(),
a.find(" > .hiddenContainer.hiddenContainer_"+b(this).val()).show()):a.find(".hiddenContainer").hide()});this.rebuilHeader();this.hiddenSelectorTrigger()},collapseTab:function(a,b){a.preventDefault();b?b&&b.collapse?this.$target.addClass("collapsed"):this.$target.removeClass("collapsed"):this.$target.hasClass("collapsed")?this.$target.removeClass("collapsed"):this.$target.addClass("collapsed")},hiddenSelectorTrigger:function(){var a,c;this.$target.find(".hiddenSelector").each(function(){a=b(this).closest(".hideParent");
(c=b(this).val())?(a.find(" > .hiddenContainer").addClass("active").hide(),a.find(" > .hiddenContainer.hiddenContainer_"+c).removeClass("active").show()):a.find(" > .hiddenContainer").addClass("active").hide()})},rebuilHeader:function(){var a=this.$tabKind;var b=this.$target.find(".hiddenContainer_"+a.val()+" select.tabType").find("option:selected").text();var d=a.find("option:selected").text();a.val()?this.$tabHeader.text(d+" - "+b):this.$tabHeader.text(d)}});XF.BRMSAddTab=XF.Click.newHandler({eventNameSpace:"BRMSAddTab",
options:{},$clone:null,$cartUrl:null,init:function(){},click:function(a){a.preventDefault();this.$clone=b(".listTabs").find(".brmsTab").last().clone();this.$clone.find("input:not(:checkbox), select, textarea").val("").prop("disabled",!1);this.$clone.find(".inputNumber-button").remove();this.$clone.find(".js-numberBoxTextInput").val(0);a=this.$clone;var c=b(".listTabs").find(".brmsTab").length+1;a.find("*[name]").each(function(){var a=b(this);a.attr("name",a.attr("name").replace(/\[(\d+)\]/,"["+c+
"]"))});a.find("label").removeAttr("for");a.find("input[name*='display_order']").val(c);a.find("*[id]").each(function(){var a=b(this);a.removeAttr("id");a.xfUniqueId()});a.appendTo(b(".listTabs"));XF.activate(a);XF.layoutChange()}});XF.BRMSCollapse=XF.Click.newHandler({eventNameSpace:"BRMSCollapse",options:{},$allTabContent:null,init:function(){this.$allTabContent=b(".listTabs").find(".brmsTab > .block-body")},click:function(a){a.preventDefault();this.$target.hasClass("collapsed")?(this.$target.removeClass("collapsed"),
b(".brmsTab").trigger("collapse-tab",{collapse:!1})):(this.$target.addClass("collapsed"),b(".brmsTab").trigger("collapse-tab",{collapse:!0}))}});XF.Element.register("brms-field-adder","XF.BRMSFieldAdder");XF.Element.register("brms-tab","XF.BRMSTab");XF.Click.register("brms-add-tab","XF.BRMSAddTab");XF.Click.register("brms-collapse","XF.BRMSCollapse")}(jQuery,window,document);