!function(f,h,k){XF.LFSTabs=XF.create({options:{isMenu:!1},lfs:null,group:null,$target:null,tabList:[],selectedTab:null,$menuTab:null,$settingButton:null,__construct:function(a,d,c,b){"undefined"===typeof b&&(b={});this.options=XF.applyDataOptions(this.options,c.data(),b);this.tabList=[];var e=this;this.lfs=a;this.group=d;this.$target=c;c.find(".tab:not(.menu-open)").each(function(){e.tabList.push(new XF.LFSTab(e.lfs,e,f(this)))});this.options.isMenu&&(this.$menuTab=c.find(".tab.menu-open"));this.$settingButton=
this.$target.closest(".tabs-container").find(".js-settingButton");this.selectedTab||this.first().select()},selectTab:function(a){this.selectedTab=a;this.$settingButton&&this.$settingButton.length&&(this.$settingButton.toggleClass("is-active",a.options.canSetting).data("href",a.options.settingHref),XF.Click.getElementHandler(this.$settingButton,"overlay").loadUrl=a.options.settingHref)},remove:function(a){a=this.indexOf(a);-1!==a&&(this.tabList[a].$target.remove(400),this.tabList.splice(a,1),this.first().select())},
first:function(){return this.tabList[0]},next:function(){var a=this.indexOf(this.selectedTab)+1;return"undefined"!==typeof this.tabList[a]?this.tabList[a]:this.first()},indexOf:function(a){return this.tabList.indexOf(a)}});XF.LFSTab=XF.create({options:{tabId:"",canSetting:!1,settingHref:""},lfs:null,tabs:null,$target:null,selected:!1,cache:{},__construct:function(a,d,c,b){"undefined"===typeof b&&(b={});this.options=XF.applyDataOptions(this.options,c.data(),b);this.lfs=a;this.tabs=d;this.$target=c.click(XF.proxy(this,
"select"));c.is(".is-selected")&&(this.selected=!0,this.tabs.selectTab(this),this.cache={content:f(this.tabs.group.$groupScroller.html())})},loadData:function(a,d,c){var b=this,e=f.extend(!0,this.tabs.group.ajaxData,{tab_id:this.options.tabId}),g=this.cache;XF.ajax("GET",this.lfs.options.updateLink,e,function(e){e.html&&e.html.content&&XF.setupHtmlInsert(e.html,function(a){f.isEmptyObject(g)?b.cache={content:a}:g.content=a;b.tabs.group.replaceContent(a,function(a){a||b.tabs.remove(this)},d,c)});"function"===
typeof a&&a.call(null)},{global:!1})},select:function(){if(this.tabs.group.updateLock)return this;var a=this,d=this.tabs.selectedTab;if(d){if(d===this)return this;d.deselect()}this.tabs.group.updateLock=!0;this.tabs.options.isMenu&&this.tabs.$menuTab.find(".title").text(a.$target.find(".title").text());this.$target.addClass("is-selected");this.selected=!0;this.tabs.selectTab(this);XF.Cookie.set("lfs_group_"+this.tabs.group.options.groupId+"_selected_tab",this.options.tabId);f.isEmptyObject(this.cache)?
this.tabs.group.loading():this.tabs.group.replaceContent(this.cache.content,null,!0,!0);this.loadData(function(){a.tabs.group.updateLock=!1;a.tabs.group.resetScroll()},!0,!0);return this},deselect:function(){this.$target.removeClass("is-selected");this.tabs.group.paginator.clearAppend()},isSelected:function(){return this.selected}})}(window.jQuery,window,document);