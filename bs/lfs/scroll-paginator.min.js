!function(c,d,e){XF.LFSScrollPaginator=XF.create({options:{append:"",filter:""},$append:null,loading:!1,__construct:function(a,b){this.options=XF.applyDataOptions(this.options,b.data());this.group=a;this.$target=b;this.init()},init:function(){this.loadPageNav();if(this.$pageNav.length&&(this.loadElements(),this.$target.on("scroll",XF.proxy(this,"onScroll")).on("lfs:group-content-updated",XF.proxy(this,"reloadContent")),this.$target.height()!==this.$target.get(0).scrollHeight))this.onScroll()},loadPageNav:function(){this.$pageNav=
this.$target.find(".js-lfsPageNav").first()},loadElements:function(){this.$append=this.$target.find(this.options.append);this.detectPageParams()},reloadContent:function(){this.loadPageNav();this.$pageNav.length&&this.loadElements()},currentPage:0,lastPage:0,detectPageParams:function(){this.currentPage=parseInt(this.$pageNav.find(".pageNav-page--current").find("a").text(),10);this.lastPage=parseInt(this.$pageNav.find(".pageNav-page").last().find("a").text(),10)},onScroll:function(){!this.isBottom()||
this.isLastPage()||this.group.updateLock||this.load()},load:function(){this.loading||(this.loading=!0,this.appendLoadingSpinner(),this.sendRequest(this.$pageNav.find(".pageNav-page--current").next().find("a").attr("href")))},requestUrl:"",sendRequest:function(a){this.requestUrl=a;XF.ajax("GET",a,{},XF.proxy(this,"appendHtml"))},appendHtml:function(a){if(a.hasItems){var b=this;XF.setupHtmlInsert(a.html,function(a){b.$pageNav.html(a.filter(".js-lfsPageNav").first().html());b.detectPageParams();b.clearLoadingSpinner();
XF.activate(b.$append.append(a.filter(b.options.filter)))})}else this.lastPage=this.currentPage,this.clearLoadingSpinner();this.loading=!1},clearAppend:function(){this.$append&&this.$append.length&&this.$append.html("")},isBottom:function(){return this.$target.scrollTop()+this.$target.height()>=this.$target.get(0).scrollHeight-1},isLastPage:function(){return this.currentPage===this.lastPage},appendLoadingSpinner:function(){this.$target.append(this.getLoadingSpinner()).scrollTop(this.$target.get(0).scrollHeight)},
clearLoadingSpinner:function(){this.$target.find(".js-loadingSpinner").remove()},getLoadingSpinner:function(){return c('<div class="page-loading-spinner js-loadingSpinner"><div class="spins"><div></div><div></div><div></div><div></div></div></div>')}})}(window.jQuery,window,document);